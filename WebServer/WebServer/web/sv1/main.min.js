var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BaseView=function(e){function t(){e.call(this),this.setSize()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.initBlackBg=function(){this._blackBg=new egret.Shape,this._blackBg.graphics.beginFill(0,.6),this._blackBg.graphics.drawRect(0,0,Api.StageUtil.stageWidth,Api.StageUtil.stageHeight),this._blackBg.graphics.endFill(),this._blackBg.touchEnabled=!0,this._blackBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},n.onGuide=function(e){this.checkGuide(e.eventBody)},n.checkGuide=function(e){return this.isInited&&this.parent?void(this.interestGuide&&this.interestGuide.indexOf(e)>-1&&(this.showGuide(e),this.currentGuideID=null)):void(this.currentGuideID=e)},n.showGuide=function(e){},n.setScaleEffect=function(e){this._scaleEffect=e},n.setSize=function(){this.top=0,this.bottom=0,this.left=0,this.right=0},n.childrenCreated=function(){var e=this;this.btnClose&&(this.btnClose.touchEnabled=!0,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)),egret.callLater(function(){e.initView(),e.isInited=!0},this)},n.initView=function(){},n.setSkinName=function(e){this.skinName="resource/skins/"+e+".exml"},n.openView=function(e){var t=this;void 0===e&&(e=null),this.isInited||!this.resources?(this.viewParent.addChild(this),egret.callLater(function(){t.open(e)},this)):(SimpleLoading.i().showLoading(),Api.ResourceUtil.loadResource(this.resources,function(){SimpleLoading.i().hideLoading(),t.viewParent.addChild(t),egret.callLater(function(){t.open(e)},t)},this.onResLoadProgress,this))},n.onResLoadProgress=function(e,t){SimpleLoading.i().setProgress(e/t)},n.open=function(e){if(void 0===e&&(e=null),this._scaleEffect||this.currentGuideID&&this.checkGuide(this.currentGuideID),this.closeHookView){if("all"==this.closeHookView)Api.ViewManager.closeAll();else if(this.closeHookView instanceof t)this.closeHookView.close();else for(var i=0;i=this.closeHookView.length;i++)Api.ViewManager.closeView(this.closeHookView[i]);this.closeHookView=null}this._needBg&&this.viewParent.addChild(this._blackBg),this.viewParent.addChild(this),egret.Tween.removeTweens(this),this.measure(),this.visible=!1,egret.callLater(this.calculatePos,this)},n.calculatePos=function(){var e=this;if(this.measuredWidth>Api.StageUtil.stageWidth||this.measuredHeight>Api.StageUtil.stageHeight){var t=Api.StageUtil.stageHeight/this.measuredHeight;this.scaleX=this.scaleY=t}else this.scaleX=this.scaleY=1;var i=(Api.StageUtil.stageWidth-this.measuredWidth*this.scaleX)/2,n=(Api.StageUtil.stageHeight-this.measuredHeight*this.scaleY)/2+3;if(this._scaleEffect){this.touchEnabled=!1,this.touchChildren=!1,this.alpha=.3;var s=this.scaleX,r=.8*s;this.scaleX=this.scaleY=r,this.x=i+this.width*(1-r)/2,this.y=n+this.height*(1-r)/2,egret.Tween.get(this).to({x:i,y:n,alpha:1,scaleX:s,scaleY:s},300,egret.Ease.backOut).call(function(){e.touchEnabled=!0,e.touchChildren=!0,e.currentGuideID&&e.checkGuide(e.currentGuideID)},this)}else this.x=i,this.y=n;this.visible=!0},n.close=function(){var e=this;if(this._scaleEffect){var t=this.x,i=this.y;this.touchEnabled=!1,this.touchChildren=!1;var n=this.scaleX,s=.8*n;egret.Tween.removeTweens(this),egret.Tween.get(this).to({x:t+this.width*(1-s)/2,y:i+this.height*(1-s)/2,alpha:.3,scaleX:s,scaleY:s},300,egret.Ease.backIn).call(function(){e.touchEnabled=!0,e.touchChildren=!0,e.scaleX=n,e.scaleY=n,e.parent&&e.parent.removeChild(e)},this)}else this.parent&&this.parent.removeChild(this);this._blackBg&&this._blackBg.parent&&this._blackBg.parent.removeChild(this._blackBg)},n.setRes=function(e){this.resources=e},n.regMsgListener=function(e,t){Api.MessageCenter.regMsgListener(e,t,this)},n.removeMsgListener=function(e,t){Api.MessageCenter.removeMsgListener(e,t,this)},n.sendMsg=function(e){Api.GameSocket.sendMsg(e)},n.getGlobalText=function(e){return Api.GlobalRes.getText(e)},n.setGlobalText=function(e,t){e.text=this.getGlobalText(t)},t}(eui.Component);egret.registerClass(BaseView,"BaseView");var GameOverView=function(e){function t(){e.call(this),this.skinName=new GameOverSkin}__extends(t,e);var i=(__define,t),n=i.prototype;return n.initView=function(){this.btn_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestart,this)},n.open=function(t){e.prototype.open.call(this),this.tf_total.text=t,2>=t?this.tf_evalue.text="Try Again":4>=t?(this.tf_evalue.text="Very Good!",egret.setTimeout(function(){RES.getRes("good_mp3").play(0,1)},this,500)):(this.tf_evalue.text="Excellent!",egret.setTimeout(function(){RES.getRes("verygood_mp3").play(0,1)},this,500)),this.tf_score.text="总分数："+t+"分"},n.onRestart=function(){this.close()},n.close=function(){e.prototype.close.call(this),Api.ViewManager.getView(2).reset()},t}(BaseView);egret.registerClass(GameOverView,"GameOverView");var GameStartView=function(e){function t(){e.call(this),this.skinName=new GameStartSkin}__extends(t,e);var i=(__define,t),n=i.prototype;return n.initView=function(){this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStart,this)},n.onStart=function(){this.close()},n.close=function(){e.prototype.close.call(this),Api.ViewManager.openView(2)},t}(BaseView);egret.registerClass(GameStartView,"GameStartView");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=960,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1,this.themeObj={skins:{"eui.Button":"resource/eui_skins/ButtonSkin.exml","eui.CheckBox":"resource/eui_skins/CheckBoxSkin.exml","eui.HScrollBar":"resource/eui_skins/HScrollBarSkin.exml","eui.HSlider":"resource/eui_skins/HSliderSkin.exml","eui.Panel":"resource/eui_skins/PanelSkin.exml","eui.TextInput":"resource/eui_skins/TextInputSkin.exml","eui.ProgressBar":"resource/eui_skins/ProgressBarSkin.exml","eui.RadioButton":"resource/eui_skins/RadioButtonSkin.exml","eui.Scroller":"resource/eui_skins/ScrollerSkin.exml","eui.ToggleSwitch":"resource/eui_skins/ToggleSwitchSkin.exml","eui.VScrollBar":"resource/eui_skins/VScrollBarSkin.exml","eui.VSlider":"resource/eui_skins/VSliderSkin.exml","eui.ItemRenderer":"resource/eui_skins/ItemRendererSkin.exml"},autoGenerateExmlsList:!0,exmls:[{path:"resource/skin/DragAcceptSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="DragAcceptSkin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image id="img" source="4_png" y="-1" scaleX="0.33" scaleY="0.33" horizontalCenter="0"/>\n	<e:Image source="image_18_png" x="0" y="125"/>\n	<e:Label id="txtName" text="mother" y="138" fontFamily="黑体" width="140" anchorOffsetX="0" verticalAlign="top" textAlign="center" x="10" textColor="0x333333" size="22"/>\n</e:Skin>'},{path:"resource/skin/DragItemSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="DragItemSkin" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="171" height="53">\n	<e:Image id="img" source="image_24_png"/>\n</e:Skin>'},{path:"resource/skin/GameOverSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="GameOverSkin" width="960" height="640" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image source="background1_jpg" left="0" right="0" top="0" bottom="0"/>\n	<e:Group width="960" height="640" horizontalCenter="0" verticalCenter="0">\n		<e:Image source="game_15_png" y="91" horizontalCenter="0" x="257" scaleX="1" scaleY="1"/>\n		<e:Image source="gold_png" x="398.04" y="271" anchorOffsetX="0" width="109.33" anchorOffsetY="0" height="108.33" scaleX="1" scaleY="1"/>\n		<e:Label id="tf_total" text="1" x="502.95" y="307.29" size="40" stroke="3" anchorOffsetX="0" width="92" strokeColor="0x836465" textColor="0xffe41f" scaleX="1" scaleY="1"/>\n		<e:Label id="tf_evalue" text="exellent" y="187.66" anchorOffsetX="0" width="553.33" anchorOffsetY="0" height="88.67" size="48" verticalAlign="middle" textAlign="center" textColor="0xe15f5f" horizontalCenter="0" fontFamily="katong" x="203" scaleX="1" scaleY="1"/>\n		<e:Label id="tf_score" text="exellent" y="382.99" anchorOffsetX="0" width="553.33" anchorOffsetY="0" height="88.67" size="36" verticalAlign="middle" textAlign="center" horizontalCenter="0" textColor="0xfffcfc" strokeColor="0xa6714a" stroke="5" fontFamily="katong" x="203" scaleX="1" scaleY="1"/>\n		<e:Button id="btn_restart" label="" y="509" anchorOffsetX="0" anchorOffsetY="0" horizontalCenter="0" x="370" scaleX="1" scaleY="1">\n			<e:skinName>\n			<e:Skin states="up,down,disabled">\n				<e:Image width="100%" height="100%" source="Button_12_png" source.down="Button_12_png" source.disabled="Button_12_png"/>\n				<e:Label id="labelDisplay" horizontalCenter="0" verticalCenter="0"/>\n			</e:Skin>\n			</e:skinName>\n		</e:Button>\n	</e:Group>\n</e:Skin>'},{path:"resource/skin/GameSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="GameSkin" xmlns:e="http://ns.egret.com/eui" xmlns:ns1="*" xmlns:w="http://ns.egret.com/wing" height="640" width="960">\n    <e:Image source="background1_jpg" left="0" right="0" top="0" bottom="0"/>\n	<e:Group horizontalCenter="0" verticalCenter="0">\n		<e:Image source="image_03_png" x="0" y="53.39"/>\n		<ns1:GameDragItem id="drag_0" skinName="DragItemSkin" y="73.85" x="23.049999999999997"/>\n		<ns1:GameDragItem id="drag_1" skinName="DragItemSkin" y="131.85000000000002" x="23.049999999999997"/>\n		<ns1:GameDragItem id="drag_2" skinName="DragItemSkin" y="192.85000000000002" x="23.049999999999997"/>\n		<ns1:GameDragItem id="drag_3" skinName="DragItemSkin" y="256.85" x="23.049999999999997"/>\n		<ns1:GameDragItem id="drag_4" skinName="DragItemSkin" y="317.85" x="23.049999999999997"/>\n		<ns1:GameDragItem id="drag_5" skinName="DragItemSkin" y="376.85" x="23.049999999999997"/>\n		<e:Image source="image_09_png" x="402.90999999999997" y="147.51"/>\n		<ns1:GameDragAcceptItem id="drag_ac_4" y="0" x="282" skinName="DragAcceptSkin"/>\n		<ns1:GameDragAcceptItem id="drag_ac_0" skinName="DragAcceptSkin" y="190" x="281"/>\n		<ns1:GameDragAcceptItem id="drag_ac_2" skinName="DragAcceptSkin" y="380" x="281"/>\n		<ns1:GameDragAcceptItem id="drag_ac_3" skinName="DragAcceptSkin" y="380" x="476.99999999999994"/>\n		<ns1:GameDragAcceptItem id="drag_ac_1" skinName="DragAcceptSkin" y="190" x="476.99999999999994"/>\n		<ns1:GameDragAcceptItem id="drag_ac_5" skinName="DragAcceptSkin" y="0" x="478.99999999999994"/>\n		<e:Image id="btn" source="check_png" x="670.35" y="508.07"/>\n		<e:Image source="gold_png" x="7.8500000000000085" y="489.7" anchorOffsetX="0" width="109.33" anchorOffsetY="0" height="108.33"/>\n		<e:Label id="tf_total" text="0" x="75.81000000000002" y="493.17" size="40" stroke="3" anchorOffsetX="0" width="92" strokeColor="0x836465" textColor="0xFFE41F"/>\n	</e:Group>\n</e:Skin>'},{path:"resource/skin/GameStartSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="GameStartSkin" width="960" height="640" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image source="background_jpg" left="0" right="0" top="0" bottom="0" x="0" y="0" scaleX="1" scaleY="1"/>\n	<e:Group width="960" height="640" horizontalCenter="0" verticalCenter="0">\n		<e:Label text="游戏规则" y="106.67" size="42" textColor="0xea5b5c" x="398.67" bold="true" fontFamily="katong" scaleX="1" scaleY="1"/>\n		<e:Label text="根据family tree上的人物图片,选择对应的人物称谓单词并拖动到图片上." y="180.34" anchorOffsetX="0" width="357.34" anchorOffsetY="0" height="169.34" x="296.34" textColor="0x7c5b3a" bold="true" fontFamily="katong" scaleX="1" scaleY="1" lineSpacing="15"/>\n		<e:Label text="游戏最高分：6" y="353.67" anchorOffsetX="0" width="602.67" anchorOffsetY="0" height="50" x="176.33" textAlign="center" verticalAlign="middle" textColor="0x7c5b3a" fontFamily="katong" scaleX="1" scaleY="1"/>\n		<e:Button id="btn_start" label="" y="414.33" x="369.99" scaleX="1" scaleY="1">\n			<e:skinName>\n			<e:Skin states="up,down,disabled">\n				<e:Image width="100%" height="100%" source="Button_22_png" source.down="Button_22_png" source.disabled="Button_22_png"/>\n				<e:Label id="labelDisplay" horizontalCenter="0" verticalCenter="0"/>\n			</e:Skin>\n			</e:skinName>\n		</e:Button>\n	</e:Group>\n</e:Skin>'},{path:"resource/skin/ScoreSkin.exml",content:'<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="ScoreSkin" width="194" height="96" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image source="gold_png" x="0" y="0" anchorOffsetX="0" width="93.34" anchorOffsetY="0" height="89.67"/>\n	<e:Label id="tf_score" text="123" x="90.99" y="17.66" size="50" strokeColor="0xAA9945" stroke="2" anchorOffsetX="0" width="92"/>\n</e:Skin>'}]},this.resObj={groups:[{keys:"image_03_png,image_06_png,image_09_png,image_12_png,image_14_png,image_16_png,image_18_png,image_22_png,image_24_png,1_png,2_png,3_png,4_png,5_png,6_png,7_png,welldone_mp3,verygood_mp3,oops_mp3,goodjob_mp3,good_mp3,background_jpg,background1_jpg,Button_12_png,Button_22_png,excellent_mp3,game_15_png,gold_png,check_png,submit_png",name:"preload"}],resources:[{url:"assets/img/Button_12.png",type:"image",name:"Button_12_png"},{url:"assets/img/Button_22.png",type:"image",name:"Button_22_png"},{url:"assets/img/background.jpg",type:"image",name:"background_jpg"},{url:"assets/img/background1.jpg",type:"image",name:"background1_jpg"},{url:"assets/img/excellent.mp3",type:"sound",name:"excellent_mp3"},{url:"assets/img/game_15.png",type:"image",name:"game_15_png"},{url:"assets/img/gold.png",type:"image",name:"gold_png"},{url:"assets/img/good.mp3",type:"sound",name:"good_mp3"},{url:"assets/img/goodjob.mp3",type:"sound",name:"goodjob_mp3"},{url:"assets/img/oops.mp3",type:"sound",name:"oops_mp3"},{url:"assets/img/verygood.mp3",type:"sound",name:"verygood_mp3"},{url:"assets/img/welldone.mp3",type:"sound",name:"welldone_mp3"},{url:"assets/game/image_03.png",type:"image",name:"image_03_png"},{url:"assets/game/image_06.png",type:"image",name:"image_06_png"},{url:"assets/game/image_09.png",type:"image",name:"image_09_png"},{url:"assets/game/image_12.png",type:"image",name:"image_12_png"},{url:"assets/game/image_14.png",type:"image",name:"image_14_png"},{url:"assets/game/image_16.png",type:"image",name:"image_16_png"},{url:"assets/game/image_18.png",type:"image",name:"image_18_png"},{url:"assets/game/image_22.png",type:"image",name:"image_22_png"},{url:"assets/game/image_24.png",type:"image",name:"image_24_png"},{url:"assets/game/1.png",type:"image",name:"1_png"},{url:"assets/game/2.png",type:"image",name:"2_png"},{url:"assets/game/3.png",type:"image",name:"3_png"},{url:"assets/game/4.png",type:"image",name:"4_png"},{url:"assets/game/5.png",type:"image",name:"5_png"},{url:"assets/game/6.png",type:"image",name:"6_png"},{url:"assets/game/7.png",type:"image",name:"7_png"},{url:"assets/game/submit.png",type:"image",name:"submit_png"},{url:"assets/game/check.png",type:"image",name:"check_png"}]}}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var i=new RES.ResourceConfig;this.isResourceLoadEnd=!0,i.parseConfig(this.resObj,"resource/"),window.resInstance.resConfig=i,window.resInstance.configComplete=!0,this.onConfigComplete(null)},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),eui.Theme.prototype.load=function(){};var t=new eui.Theme("",this.stage);t.onConfigLoaded(JSON.stringify(this.themeObj)),this.onThemeLoadComplete(),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.startCreateScene=function(){Api.Init(this.stage),Api.ViewManager.regView(1,GameStartView,LayerType.GAME),Api.ViewManager.regView(2,GameView,LayerType.GAME),Api.ViewManager.regView(3,GameOverView,LayerType.GAME),Api.ViewManager.regView(4,Score,LayerType.TIPS),Api.ViewManager.openView(1)},t}(eui.UILayer);egret.registerClass(Main,"Main");var Score=function(e){function t(){e.call(this),this.skinName=new ScoreSkin,this.width=195,this.height=95,this.touchEnabled=!1,this.touchChildren=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setSize=function(){},n.initView=function(){},n.open=function(t){var i=this;e.prototype.open.call(this),this.tf_score.text=t,egret.callLater(function(){var e=i.y-100;egret.Tween.get(i).to({y:e},1e3).call(i.close,i)},this)},t}(BaseView);egret.registerClass(Score,"Score");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var Api=function(){function e(){}var t=(__define,e);t.prototype;return e.Init=function(t,i){e.GlobalRes=new GlobalRes,e.StageUtil=new StageUtil(t),e.ModuleManager=new ModuleManager,e.DateUtil=new DateUtil,e.ResourceUtil=new ResourceUtil,e.Layers=new Layers(t),e.ViewManager=new ViewManager,e.TimerManager=new TimerManager,e.ArrayUtil=new ArrayUtil,e.TipsManager=new TipsManager,e.Dialogue=new Dialogue,e.MathUtils=new MathUtils,e.URLLoaderPool=new URLLoaderPool,e.TextFlowMaker=new TextFlowMaker,e.Log=new Log,e.NumberFormat=new NumberFormat,e.DragManager=new DragManager,e.Gesture=new Gesture,e.Keyboard=new Keyboard},e}();egret.registerClass(Api,"Api");var EventCenter=function(){function e(){}var t=(__define,e);t.prototype;return e.addEventListener=function(e,t,i){this._eventDic[e]||(this._eventDic[e]=[]),this.hasEventListener(e,t,i)||this._eventDic[e].push({"this":i,fun:t})},e.hasEventListener=function(e,t,i){if(!this._eventDic[e])return!1;for(var n;n<this._eventDic[e].length;n++)if(this._eventDic[e][n].fun==t&&this._eventDic[e][n]["this"]==i)return!0;return!1},e.removeEventListener=function(e,t,i){var n=this;this._eventDic[e]&&this._eventDic[e].forEach(function(s,r){return s.fun==t&&s["this"]==i?void n._eventDic[e].splice(r,1):void 0})},e.getEventIndex=function(e,t,i){if(!this._eventDic[e])return-1;for(var n;n<this._eventDic[e].length;n++)if(this._eventDic[e][n].fun==t&&this._eventDic[e][n]["this"]==i)return n;return-1},e.dispatchEvent=function(e){if(this._eventDic[e.type]){var t;for(var i in this._eventDic[e.type])t=this._eventDic[e.type][i],t.fun.call(t["this"],e)}},e.dispatchWith=function(t,i){e.dispatchEvent(new GameEvent(t,i))},e._eventDic={},e}();egret.registerClass(EventCenter,"EventCenter");var GameEvent=function(e){function t(t,i){e.call(this,t),this.eventBody=i}__extends(t,e);var i=(__define,t);i.prototype;return t.GAME_EVENT_GAMEOVER="game_over",t.GAME_EVENT_GAMESTART="game_start",t.GAME_EVENT_GAMERESTART="game_restart",t.GAME_EVENT_SHARE="game_share",t.SERVER_CONNECTED="server_connected",t.SERVER_CONNECT_CLOSE="server_connect_close",t.DRAG_BEGIN="drag_begin",t.DRAG_MOVE="drag_move",t.DRAG_END="drag_end",t}(egret.Event);egret.registerClass(GameEvent,"GameEvent");var JsonpManager=function(){function e(){}var t=(__define,e);t.prototype;return e.process=function(t,i,n){e.completeCall["call_"+e._regID]=function(){i.bind(n)(),e._callbackCount++,e._callbackCount==e._regID&&(e.completeCall={})},e.startLoader(t,e._regID++)},e.startLoader=function(e,t){var i=document.createElement("script");i.src=e+"JsonpManager.completeCall.call_"+t,document.body.appendChild(i);var n=this.getXHR();n.open("HEAD","index.html",!0),n.send()},e.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},e._regID=0,e._callbackCount=0,e.completeCall={},e}();egret.registerClass(JsonpManager,"JsonpManager");var ButtonState=function(){function e(){}var t=(__define,e);t.prototype;return e.UP="up",e.DOWN="down",e.DISABLE="disable",e}();egret.registerClass(ButtonState,"ButtonState");var Lang=function(){function e(){}var t=(__define,e);t.prototype;return e.LANG_CN="cn",e.LANG_EN="en",e.LANG_TW="tw",e}();egret.registerClass(Lang,"Lang");var DragManager=function(){function e(){this._dragItems=new Dict,this._dragAccept={},this._savedItemProp={},this.initStageEvent()}var t=(__define,e),i=t.prototype;return i.initStageEvent=function(){Api.StageUtil.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),Api.StageUtil.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),Api.StageUtil.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this)},i.initDragItemEvent=function(e){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},i.removeDragItemEvent=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},i.initAcceptDragEvent=function(e){e.addEventListener(egret.TouchEvent.TOUCH_END,this.onAcceptDrag,this)},i.removeAcceptDragEvent=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onAcceptDrag,this)},i.regAcceptDrag=function(e,t){this._dragAccept[e.hashCode]=t,this.initAcceptDragEvent(e)},i.removeAcceptDrag=function(e){delete this._dragAccept[e.hashCode],this.removeAcceptDragEvent(e)},i.regDragItem=function(e){this._dragItems[e.hashCode]=e,this.initDragItemEvent(e)},i.removeDragItem=function(e){this.removeDragItemEvent(e),delete this._dragItems[e.hashCode]},i.onAcceptDrag=function(e){this._currDragItem&&this._dragAccept.hasOwnProperty(e.currentTarget.hashCode)&&(!this._dragAccept[e.currentTarget.hashCode]||this._currDragItem instanceof this._dragAccept[e.currentTarget.hashCode])&&e.currentTarget.onDragIn(this._currDragItem)},i.onTouchBegin=function(e){this._dragItems[e.currentTarget.hashCode]&&(this._needCheck=!0,this._startPos=new egret.Point(e.stageX,e.stageY),this._currDragItem=this._dragItems[e.currentTarget.hashCode])},i.onTouchMove=function(e){this._needCheck&&(this._isDragMove?(this._currDragItem.onDragMove(e),this._currDragItem.x=this._savedItemProp.globalX+e.stageX-this._startPos.x,this._currDragItem.y=this._savedItemProp.globalY+e.stageY-this._startPos.y):(Math.abs(e.stageX-this._startPos.x)>10||Math.abs(e.stageY-this._startPos.y)>10)&&(this._isDragMove=!0,this._currDragItem.onDragBegin(e),this._currDragItem.touchEnabled=!1,this._currDragItem.touchChildren=!1,this.saveItemProp()))},i.resumeProp=function(){this._currDragItem.x=this._savedItemProp.x,this._currDragItem.y=this._savedItemProp.y,this._savedItemProp.parent.addChildAt(this._currDragItem,this._savedItemProp.childIndex)},i.saveItemProp=function(){this._savedItemProp.x=this._currDragItem.x,this._savedItemProp.y=this._currDragItem.y;var e=this._currDragItem.localToGlobal(0,0);this._savedItemProp.globalX=e.x,this._savedItemProp.globalY=e.y,this._savedItemProp.childIndex=this._currDragItem.parent.getChildIndex(this._currDragItem),this._savedItemProp.parent=this._currDragItem.parent,this._currDragItem.x=e.x,this._currDragItem.y=e.y,Api.StageUtil.stage.addChild(this._currDragItem)},i.onTouchEnd=function(e){this._needCheck&&(this._isDragMove&&(this._currDragItem.onDragEnd(e),this.resumeProp()),this._needCheck=!1,this._isDragMove=!1,this._currDragItem.touchEnabled=!0,this._currDragItem=null)},e}();egret.registerClass(DragManager,"DragManager");var Gesture=function(){function e(){this._longTouchTimer=new Dict,this._longTouchCallback=new Dict,this._doubleTouchCallback=new Dict,this._doubleTouchTimer=new Dict}var t=(__define,e),i=t.prototype;return i.addDoubleTouchCallback=function(e,t,i){e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._doubleTouchCallback[e.hashCode]||(this._doubleTouchCallback[e.hashCode]=[]),this._doubleTouchCallback[e.hashCode].push({callback:t,callobj:i})},i.addLongTouchCallback=function(e,t,i){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchOut,this),this._longTouchCallback[e.hashCode]||(this._longTouchCallback[e.hashCode]=[]),this._longTouchCallback[e.hashCode].push({callback:t,callobj:i})},i.removeLongTouchCallback=function(e,t,i){if(this._longTouchCallback[e.hashCode])for(var n=this._longTouchCallback[e.hashCode].length-1;n>=0;n--)this._longTouchCallback[e.hashCode][n].callback==t&&this._longTouchCallback[e.hashCode][n].callobj==i&&this._longTouchCallback[e.hashCode].splice(n,1)},i.onTouchBegin=function(e){this._longTouchTimer[e.currentTarget.hashCode]&&(this._touchBeginX=e.stageX,this._touchBeginY=e.stageY,Api.TimerManager.remove(this._longTouchTimer[e.currentTarget.hashCode])),this._longTouchTimer[e.currentTarget.hashCode]=Api.TimerManager.setTimeout(this.onTimeOut,this,300,e.currentTarget)},i.onTouchMove=function(e){(Math.abs(this._touchBeginX-e.stageX)>6||Math.abs(this._touchBeginY-e.stageY)>6)&&this.removeTimer(e.currentTarget)},i.onTimeOut=function(e){this.removeTimer(e),this.callTarget(e)},i.callTarget=function(e){this._longTouchCallback[e.hashCode]&&this._longTouchCallback[e.hashCode].map(function(t){t.callback.call(t.callobj,e)})},i.onTouchOut=function(e){this.removeTimer(e.currentTarget)},i.onTouchEnd=function(e){this.removeTimer(e.currentTarget)},i.removeTimer=function(e){this._longTouchTimer[e.hashCode]&&Api.TimerManager.remove(this._longTouchTimer[e.hashCode])},i.onTouchTap=function(e){var t=egret.getTimer();this._doubleTouchTimer[e.currentTarget.hashCode]&&t-this._doubleTouchTimer[e.currentTarget.hashCode]<400&&this.callDoubleTouch(e.currentTarget),this._doubleTouchTimer[e.currentTarget.hashCode]=t},i.callDoubleTouch=function(e){this._doubleTouchCallback[e.hashCode]&&this._doubleTouchCallback[e.hashCode].map(function(t){t.callback.call(t.callobj,e)})},e}();egret.registerClass(Gesture,"Gesture");var Keyboard=function(){function e(){this._keyDownEvents=new Dict,this._keyUpEvents=new Dict,this.initEvent()}var t=(__define,e),i=t.prototype;return i.initEvent=function(){egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_HTML5&&(document.addEventListener("keyup",function(t){EventCenter.dispatchEvent(new GameEvent(e.KeyUpEvent+"_"+t.keyCode))}),document.addEventListener("keydown",function(t){EventCenter.dispatchEvent(new GameEvent(e.KeyDownEvent+"_"+t.keyCode))}))},i.addKeyUpListener=function(t,i,n){EventCenter.addEventListener(e.KeyUpEvent+"_"+t,i,n)},i.removeKeyUpListener=function(e,t,i){},i.addKeyDownListener=function(t,i,n){EventCenter.addEventListener(e.KeyDownEvent+"_"+t,i,n)},i.removeKeyDownListener=function(e,t,i){},i.onKeyUp=function(e){},e.KeyUpEvent="keyupevent",e.KeyDownEvent="keydownevent",e.KEY_BACKSPACE=8,e.KEY_TAB=9,e.KEY_CLEAR=12,e.KEY_ENTER=13,e.KEY_SHIFT_LEFT=16,e.KEY_CONTROL_LEFT=17,e.KEY_ALT_LEFT=18,e.KEY_ESC=27,e.KEY_SPACE=32,e.KEY_LEFT=37,e.KEY_UP=38,e.KEY_RIGHT=39,e.KEY_DOWN=40,e.KEY_DELETE=46,e.KEY_0=48,e.KEY_1=49,e.KEY_2=50,e.KEY_3=51,e.KEY_4=52,e.KEY_5=53,e.KEY_6=54,e.KEY_7=55,e.KEY_8=56,e.KEY_9=57,e.KEY_A=65,e.KEY_B=66,e.KEY_C=67,e.KEY_D=68,e.KEY_E=69,e.KEY_F=70,e.KEY_G=71,e.KEY_H=72,e.KEY_I=73,e.KEY_J=74,e.KEY_K=75,e.KEY_L=76,e.KEY_M=77,e.KEY_N=78,e.KEY_O=79,e.KEY_P=80,e.KEY_Q=81,e.KEY_R=82,e.KEY_S=83,e.KEY_T=84,e.KEY_U=85,e.KEY_V=86,e.KEY_W=87,e.KEY_X=88,e.KEY_Y=89,e.KEY_Z=90,e}();egret.registerClass(Keyboard,"Keyboard");var Button=function(e){function t(){e.call(this),this._enabled=!0,this.initEvent(),this.skinName="resource/skins/component/SimpleButtonSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.initEvent=function(){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this)},s.createChildren=function(){e.prototype.createChildren.call(this),this._isInited=!0,this._dis&&this.setLabelDisplay(this._dis)},i(s,"buttonWidth",function(){return this._btnWidth},function(e){this._btnWidth=e,this.width=e}),s.onTouchEnd=function(){this._enabled&&(this._touchBegin&&this.dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP)),this._touchBegin=!1,this.currentState=ButtonState.UP)},s.onTouchBegin=function(){this._enabled&&(this._touchBegin=!0,this.currentState=ButtonState.DOWN)},i(s,"enabled",function(){return this._enabled},function(e){this._enabled=e,e?this.currentState=ButtonState.UP:this.currentState=ButtonState.DISABLE}),s.setBtnSkin=function(e,t,i){this.up.source=e,t?this.down.source=t:this.down.source=e,i?this.disable.source=i:this.disable.source=e},s.setLabelDisplay=function(e){return this._isInited?void("string"==typeof e?this.labelDisplay.text=e:(this._labelDis=e,this.addChild(this._labelDis),this.labelDisplay.visible=!1)):void(this._dis=e)},t}(eui.Component);egret.registerClass(Button,"Button");var CCDisplayObjectContainer=function(e){function t(){e.call(this),this._childIndex={}}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addChild=function(t){return this._childIndex[this.getNewMaxIndex()]=t,e.prototype.addChild.call(this,t)},n.addChildAt=function(e,t){return this.validateChildrenIndex(t),this._childIndex[t]=e,this.addChild(e),this.sortChildren(t),e},n.removeChild=function(t){return this.deleteChild(t),e.prototype.removeChild.call(this,t)},n.getNewMaxIndex=function(){var e=Object.keys(this._childIndex);return e.sort(),parseFloat(e[e.length-1])+1},n.deleteChild=function(e){for(var t=Object.keys(this._childIndex),i=0,n=t.length;n>i;i++)if(this._childIndex[t[i]]==e){delete this._childIndex[t[i]];break}},n.validateChildrenIndex=function(e){for(var t=e;this._childIndex[t];)if(t-=.01,void 0==this._childIndex[t]){for(var i=t;e>i;i+=.01)this._childIndex[i]=this._childIndex[i+.01];break}},n.sortChildren=function(e){var t=Object.keys(this._childIndex);t.sort();for(var i=0,n=t.length;n>i;i++)e>i||this.addChild(this._childIndex[t[i]])
},n.setChildZIndex=function(e,t){this.validateChildrenIndex(t),this.addChild(e),this.sortChildren(t)},t}(egret.DisplayObjectContainer);egret.registerClass(CCDisplayObjectContainer,"CCDisplayObjectContainer");var DropDownList=function(e){function t(){e.call(this),this.skinName="resource/skins/component/DropDownListSkin.exml"}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.childrenCreated=function(){this.dropList.visible=!1,this.dropDown.touchEnabled=!0,this.dropScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.dropDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showDropDown,this),this.itemList.itemRenderer=DropDownListItem,this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onSelectItem,this)},s.onSelectItem=function(){this.dropList.visible=!1,this.itemList.selectedIndex!=this._lastSelectIndex&&this.updateDisplay()},s.showDropDown=function(){this.dropList.visible=!this.dropList.visible},s.setSelectdIndex=function(e){this.itemList.selectedIndex=e,this.onSelectItem()},s.getSelectedIndex=function(){return this.itemList.selectedIndex},s.updateDisplay=function(){this._lastSelectIndex=this.itemList.selectedIndex,this.selectedItem=this.itemList.selectedItem,this.itemList.selectedItem?this.selected.text=this.itemList.selectedItem.label:this.selected.text="",this.dispatchEventWith(egret.Event.CHANGE)},i(s,"dataProvider",function(){return this._dataProvider},function(e){this._dataProvider=e,this.itemList.dataProvider=this._dataProvider,e.length>0&&(this.itemList.selectedIndex=0),this.updateDisplay()}),t}(eui.Component);egret.registerClass(DropDownList,"DropDownList");var DropDownListItem=function(e){function t(){e.call(this),this.initDisplay()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.initDisplay=function(){this.left=0,this.right=0,this.height=30,this.stroke=1,this.size=20,this.verticalAlign="middle",this.textAlign="center"},i(s,"data",function(){return this._data},function(e){this._data=e,this.dataChanged()}),s.dataChanged=function(){this.text=this._data.label},t}(eui.Label);egret.registerClass(DropDownListItem,"DropDownListItem",["eui.IItemRenderer","eui.UIComponent"]);var Tabbar=function(e){function t(){e.call(this),this._btnMargin=2,this._contentContainer=new egret.DisplayObjectContainer,this._contentPos=new egret.Point(0,0),this._content=new Dict,this._tabButton=new Dict,this._adaption=new Dict,this.touchEnabled=!0,this.addChild(this._contentContainer),this.setButtonSkin("union-button2","union-button2-a")}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.setButtonSkin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this._buttonSkins=arguments},s.setContent=function(e,i,n,s,r){void 0===s&&(s=t.ADAPTION_SHOW_ALL),void 0===r&&(r=null),this.pushTabData(n,i,s,e,r),this.invalidateTabbar()},s.pushTabData=function(e,i,n,s,r){void 0===n&&(n=t.ADAPTION_SHOW_ALL),void 0===s&&(s=-1),void 0===r&&(r=null);var a;this._tabButton[s]?a=this._tabButton[s]:(a=new TabbarButton,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateSelectIndex,this)),a.data=r,a.setBtnSkin(this._buttonSkins[0],this._buttonSkins[1]),a.setLabelDisplay(e),-1==s&&(s=Object.keys(this._tabButton).length),i&&i.parent&&i.parent.removeChild(i),this._tabButton[s]=a,this._content[s]=i,this._adaption[s]=n},i(s,"dataProvider",function(){return this._dataProvider},function(e){var t=this;this.reset(),this._dataProvider=e,this._dataProvider.forEach(function(e){t.pushTabData(e.label,e.content,e.adaption,-1,e.data)},this),this.invalidateTabbar()}),s.updateButtonDisplay=function(){if(this._validateProp){for(var e=Object.keys(this._tabButton),t=0,i=0,n=e.length;n>i;i++)this._tabButton[e[i]].x=t+this._btnMargin*i,this._tabButtonWidth?this._tabButton[e[i]].width=this._tabButtonWidth:this._tabButton[e[i]].width=this._tabButton[e[i]].label.textWidth+40,t+=this._tabButton[e[i]].width,this.addChildAt(this._tabButton[e[i]],0),this._content[e[i]]&&this.setContentAdaption(this._content[e[i]],this._adaption[e[i]]);this._validateProp=!1,this.setContentPos(this._contentPos.x,this._contentPos.y),this._selectIndex||(this.selectedIndex=0)}},s.invalidateTabbar=function(){this._validateProp=!0,egret.callLater(this.updateButtonDisplay,this)},i(s,"btnMargin",function(){return this._btnMargin},function(e){this._btnMargin=e,Object.keys(this._tabButton).length>0&&this.invalidateTabbar()}),s.setContentPos=function(e,t){this._contentPos.x=e,this._contentPos.y=t,this._contentContainer.x=this._contentPos.x,this._contentContainer.y=this._contentPos.y,this._tabButton[0]&&(this._tabButton[0].height||this._tabButton[0].validateNow(),this._contentContainer.y+=this._tabButton[0].height)},s.setContentSize=function(e,t){this._contentWidth=e,this._contentHeight=t,this.invalidateTabbar()},s.setContentAdaption=function(e,i){if(!(e.width<=this._contentWidth&&e.height<=this._contentHeight)){var n;i==t.ADAPTION_SHOW_ALL?(n=e.width/e.height>this._contentWidth/this._contentHeight?this._contentWidth/e.width:this._contentHeight/e.height,e.scaleX=e.scaleY=n):i==t.ADAPTION_SCALE?(e.width=this._contentWidth,e.height=this._contentHeight):i==t.ADAPTION_SCROLL&&(n=e.width/e.height>this._contentWidth/this._contentHeight?this._contentHeight/e.height:this._contentWidth/e.width,e.scaleX=e.scaleY=n)}},s.checkScroller=function(){if(!this._scroller){this._scroller=new eui.Scroller,this._scroller.bounces=!1,this._scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this._scroller.width=this._contentWidth,this._scroller.height=this._contentHeight;var e=new eui.Group;this._scroller.viewport=e}},s.setTabButtonWidth=function(e){this._tabButtonWidth=e,this.invalidateTabbar()},i(s,"selectedIndex",function(){return this._selectIndex},function(e){var i=this._tabButton[e];if(this._selectIndex==e)return void i.active();null!=this._selectIndex&&this._tabButton[this._selectIndex].deactive(),this._selectIndex=e,this._tabButton[this._selectIndex]&&this._tabButton[this._selectIndex].active(),this._content[this._selectIndex]&&(this._content[this.selectedIndex]instanceof egret.DisplayObject?(this.clearContainer(),this._content[this._selectIndex].visible=!0,this._adaption[this._selectIndex]==t.ADAPTION_SCROLL?(this.checkScroller(),this._contentContainer.addChild(this._scroller),this._scroller.viewport.addChild(this._content[this._selectIndex])):this._contentContainer.addChild(this._content[this._selectIndex])):this._content[this.selectedIndex]instanceof Function&&this._content[this.selectedIndex](this.selectedIndex));var n=new egret.Event(egret.Event.CHANGE);n.data=this._tabButton[this._selectIndex].data,this.dispatchEvent(n)}),s.clearContainer=function(){this._contentContainer.removeChildren(),this._scroller&&this._scroller.viewport.removeChildren()},s.updateSelectIndex=function(e){for(var t=Object.keys(this._tabButton),i=0,n=t.length;n>i;i++)if(this._tabButton[t[i]]==e.currentTarget){this.selectedIndex=parseInt(t[i]);break}},s.reset=function(){for(var e=Object.keys(this._tabButton),t=0;t<e.length;t++)this._tabButton[e[t]].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.updateSelectIndex,this),this.removeChild(this._tabButton[e[t]]);this._contentContainer.removeChildren(),this._content=new Dict,this._tabButton=new Dict,this._adaption=new Dict},t.ADAPTION_SHOW_ALL="show_all",t.ADAPTION_SCROLL="scroll",t.ADAPTION_SCALE="scale",t.ADAPTION_NONE="none",t}(eui.Component);egret.registerClass(Tabbar,"Tabbar");var superSetter=egret.superSetter,GameTabBar=function(e){function t(){e.call(this),this.setButtonSkin("tabNormal","tabOver")}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"selectedIndex",void 0,function(e){this._selectIndex!=e&&(null!=this._selectIndex&&this._tabButton[this._selectIndex].setState(ButtonState.UP),this._selectIndex=e,this._tabButton[this._selectIndex]&&this._tabButton[this._selectIndex].setState(ButtonState.DOWN),this._contentContainer.removeChildren(),this._contentContainer.addChild(this._content[this._selectIndex]),this.swapChildrenAt(this._selectIndex,Object.keys(this._tabButton).length-1))}),s.setContent=function(e,t,i){this._content[e]=t;var n=new Button;n.buttonWidth=this._tabButtonWidth,n.setBtnSkin(this._buttonSkins[0],this._buttonSkins[1],this._buttonSkins[2]),n.setLabelDisplay(i),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateSelectIndex,this),this._tabButton[e]=n,this._validateProp=!0,egret.callLater(this.updateButtonDisplay,this)},t}(Tabbar);egret.registerClass(GameTabBar,"GameTabBar");var HotspotBitmap=function(e){function t(){e.call(this),this._hotspot=[],this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addHotspotArea=function(e,t,i,n){this._hotspot.push({rect:e,callback:t,thisObj:i,para:n})},n.onTouch=function(e){for(var t,i=e.localX,n=e.localY,s=0;s<this._hotspot.length;s++)t=this._hotspot[s],t.rect.contains(i,n)&&(t.para?t.callback.call(t.thisObj,t.para):t.callback.call(t.thisObj))},t}(egret.Bitmap);egret.registerClass(HotspotBitmap,"HotspotBitmap");var ImgButton=function(e){function t(){e.call(this),this.init(),this.touchEnabled=!0,this.touchChildren=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onTouchBegin=function(){this._resArr[1]&&(this._btn.texture=this._resArr[1])},n.onTouchEnd=function(){this._resArr[0]&&(this._btn.texture=this._resArr[0])},n.init=function(){this._btn=new egret.Bitmap,this._label=new egret.TextField,this._label.size=28,this._label.fontFamily="黑体",this._label.textColor=16777215,this._label.textAlign="center",this._label.verticalAlign=egret.VerticalAlign.MIDDLE,this._label.x=25,this._labelImg=new egret.Bitmap,this.addChild(this._btn),this.addChild(this._labelImg),this.addChild(this._label)},n.initRes=function(e,t,i,n){this._resArr=[RES.getRes(e),RES.getRes(t)],this._btn.texture=this._resArr[0],i&&this.setLable(i),n&&(this._labelImg.x=this._btn.width/2,this._labelImg.y=this._btn.height/2,this._labelImg.texture=RES.getRes(n))},n.setLable=function(e){this._label.width=this._btn.width-50,this._label.height=this._btn.height,this._label.text=e},n.setImgLabel=function(e){this._labelImg.texture=RES.getRes(e),this._labelImg.x=this._btn.width/2,this._labelImg.y=this._btn.height/2},t}(egret.DisplayObjectContainer);egret.registerClass(ImgButton,"ImgButton");var ImgNumManager=function(){function e(){this._imgPool=[],this._containerPool=[]}var t=(__define,e),i=t.prototype;return e.i=function(){return this._instance||(this._instance=new e),this._instance},i.createNumPic=function(e,t){var i,n=this.getContainer(),s=e.toString(),r=0;for(r;r<s.length;r++)i=this.getSingleNumPic(s.charAt(r),t),n.addChild(i);return this.repositionNumPic(n),n},i.destroyNumPic=function(e){e.alpha=1,e.visible=!0,e.scaleX=e.scaleY=1,this.clearContainer(e),e.parent&&e.parent.removeChild(e),this._containerPool.push(e)},i.changeNum=function(e,t,i){var n=t.toString();if(e.numChildren>n.length)for(;e.numChildren>n.length;)this.recycleBM(e.getChildAt(e.numChildren-1));var s,r=0;for(r;r<n.length;r++)r>=e.numChildren&&e.addChild(this.getBitmap()),s=n.charAt(r),s="."==s?"dot":s,e.getChildAt(r).texture=RES.getRes(i+s);this.repositionNumPic(e)},i.repositionNumPic=function(e){var t,i=0,n=0;for(i;i<e.numChildren;i++)t=e.getChildAt(i),t.x=n,n=t.x+t.width},i.clearContainer=function(e){for(;e.numChildren;)this.recycleBM(e.removeChildAt(0))},i.recycleBM=function(e){e&&e.parent&&(e.parent.removeChild(e),e.texture=null,this._imgPool.push(e))},i.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},i.getSingleNumPic=function(e,t){"."==e&&(e="dot");var i=this.getBitmap();return i.texture=RES.getRes(t+e),i},i.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},e}();egret.registerClass(ImgNumManager,"ImgNumManager");var MovieClip=function(e){function t(){e.call(this),this._currentFrame=0,this._pastTime=0,this.frameRate=30,this.touchEnabled=!1,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"frameRate",function(){return this._frameRate},function(e){this._frameRate=e,this._frameTime=Math.abs(1e3/e)}),s.setFrameData=function(e){this._frameKeys=e,this._totalFrame=this._frameKeys.length,this._frameTexture=[];for(var t=!0,i=0;i<this._totalFrame;i++)if(null==RES.getRes(this._frameKeys[i])){t=!1;break}t?this.initResource():(this._loadGroupName="group"+Math.random(),RES.createGroup(this._loadGroupName,e),RES.loadGroup(this._loadGroupName),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResLoaded,this))},s.initResource=function(){for(var e=0,t=this._totalFrame;t>e;e++)this._frameTexture.push(RES.getRes(this._frameKeys[e]));this.texture=this._frameTexture[0],this._pastTime=0},s.onResLoaded=function(e){e.groupName==this._loadGroupName&&this.initResource()},s.play=function(e){void 0===e&&(e=-1),-1!=this._ticker&&this.stop(),this._playCount=e,this._currentFrame=0,this._ticker=Api.TimerManager.startTicker(this.enterFrame,this)},s.resume=function(){this._ticker=Api.TimerManager.startTicker(this.enterFrame,this)},s.stop=function(){Api.TimerManager.remove(this._ticker),this._ticker=-1},s.removeFromStage=function(){this._autoStop=!0,this.stop()},s.addToStage=function(){this._autoStop&&this.play(this._playCount)},s.enterFrame=function(e){this._frameTexture&&this._frameTexture.length&&(this._pastTime+=e,this._pastTime<this._frameTime||(this._currentFrame++,this._pastTime=0,this._currentFrame>=this._totalFrame&&(this._currentFrame=0,-1!=this._playCount&&(this._playCount--,0==this._playCount&&this.over())),this.texture=this._frameTexture[this._currentFrame]))},s.over=function(){this.stop(),this._currentFrame=0},s.reset=function(){this.stop(),this._frameTexture=[],this._frameKeys=[],this._totalFrame=0,this._pastTime=0,this._autoStop=!1},t}(egret.Bitmap);egret.registerClass(MovieClip,"MovieClip");var MovieClipPool=function(){function e(){this._pool=[]}var t=(__define,e),i=t.prototype;return e.i=function(){return this._instance||(this._instance=new e),this._instance},i.recycleMC=function(e){e.reset(),e.parent&&e.parent.removeChild(e),this._pool.push(e)},i.getMC=function(){return this._pool.length?this._pool.shift():new MovieClip},e}();egret.registerClass(MovieClipPool,"MovieClipPool");var ScaleView=function(e){function t(t){e.call(this),this.maxScale=2,this.minScale=.5,this.beginVector=[],this.beginScale=1,this.beginX=0,this.beginY=0,this._content=t,this.touchEnabled=!0,this.addChild(t),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.stage.addEventListener(egret.Event.LEAVE_STAGE,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this)},n.setScaleRange=function(e,t){this.maxScale=t,this.minScale=e},n.onTouchBegin=function(e){t.pointMap[e.touchPointID]=[e.stageX,e.stageY];var i=Object.keys(t.pointMap),n=i.length;if(n>=2){var s=t.pointMap[i[0]],r=t.pointMap[i[1]];this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.beginVector=[r[0]-s[0],r[1]-s[1]],this.beginScale=this._content.scaleX,this.beginX=this._content.x,this.beginY=this._content.y}},n.onTouchMove=function(e){t.pointMap[e.touchPointID]=[e.stageX,e.stageY];var i=Object.keys(t.pointMap),n=i.length;if(n>=2){var s=t.pointMap[i[0]],r=t.pointMap[i[1]],a=[r[0]-s[0],r[1]-s[1]],o=this.getScale(a),h=o*this.beginScale;this.scaleWithPoint(h,this.getScalePoint())}},n.onTouchEnd=function(e){delete t.pointMap[e.touchPointID];var i=Object.keys(t.pointMap).length;2>i&&this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},n.getScalePoint=function(){for(var e=[0,0],i=Object.keys(t.pointMap),n=0;2>n;n++)e[0]+=t.pointMap[i[n]][0],e[1]+=t.pointMap[i[n]][1];return e[0]=Math.round(e[0]/2),e[1]=Math.round(e[1]/2),e},n.getVectorLength=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},n.getScale=function(e){var t=this.getVectorLength(e),i=this.getVectorLength(this.beginVector);return t/i},n.scaleWithPoint=function(e,t){if(!(e<this.minScale||e>this.maxScale)){var i=this._content.globalToLocal(t[0],t[1]),i=new egret.Point(i.x,i.y),n=this.beginX-i.x*(e-this.beginScale),s=this.beginY-i.y*(e-this.beginScale);this._content.x=n,this._content.y=s,this._content.scaleX=e,this._content.scaleY=e}},t.pointMap={},t}(egret.DisplayObjectContainer);egret.registerClass(ScaleView,"ScaleView");var ScrollRectView=function(e){function t(t,i,n,s){e.call(this),this.viewRect=new egret.Rectangle(0,0,t,i),this._totalHeight=s,this._totalWidth=n,this._viewSavePoint=new egret.Point,this.progressX=0,this.progressY=0,this.positionX=0,this.positionY=0,this._lastPositionX=0,this._lastPositionY=0,this._scrollEnabled=!0}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"content",void 0,function(e){this._showContent=e,this._showContent.touchEnabled=!0,this.updateView()}),s.updateView=function(){this.addChild(this._showContent),this.setEvent()},s.setEvent=function(){this._showContent.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this._showContent.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._showContent.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._showContent.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this._showContent.addEventListener(egret.Event.RESIZE,this.onContentResize,this)},s.onContentResize=function(){this.validate()},s.onTouchBegin=function(e){this._scrollEnabled&&(egret.Tween.removeTweens(this),this._viewSavePoint?(this._viewSavePoint.x=e.stageX,this._viewSavePoint.y=e.stageY):this._viewSavePoint=new egret.Point(e.stageX,e.stageY),this._rollSpeedX=0,this._rollSpeedY=0,egret.startTick(this.checkSpeed,this))},s.checkSpeed=function(e){return!0},s.onTouchEnd=function(e){this._scrollEnabled&&(this._viewSavePoint=null,this.slide(),this._isMoving=!1)},s.onTouchMove=function(e){this._scrollEnabled&&(this._viewSavePoint||(this._viewSavePoint=new egret.Point(e.stageX,e.stageY)),this._rollSpeedX=e.stageX-this._viewSavePoint.x,this._rollSpeedY=e.stageY-this._viewSavePoint.y,this._viewSavePoint.x=e.stageX,this._viewSavePoint.y=e.stageY,(this._rollSpeedX>3||this._rollSpeedX<-3||this._rollSpeedY>3||this._rollSpeedY<-3)&&(this._showContent.x+=this._rollSpeedX,this._showContent.y+=this._rollSpeedY,this.validate(),this.setPosition(),this._isMoving||(this._isMoving=!0)))},s.setPosition=function(e){"y"!=e&&(this.positionX=Math.abs(this._showContent.x/this._showContent.scaleX),this.progressX=-this._showContent.x/(this._totalWidth-this.viewRect.width)/this._showContent.scaleX),"x"!=e&&(this.positionY=Math.abs(-this._showContent.y/this._showContent.scaleY),this.progressY=-this._showContent.y/(this._totalHeight-this.viewRect.height)/this._showContent.scaleY),this.onMove()},s.validate=function(e){var t=this._showContent.x,i=this._showContent.y;"y"!=e&&(t<this.viewRect.width-this._totalWidth*this._showContent.scaleX&&(t=this.viewRect.width-this._totalWidth*this._showContent.scaleX),t>0&&(t=0),this._showContent.x=t),"x"!=e&&(i<this.viewRect.height-this._totalHeight*this._showContent.scaleY&&(i=this.viewRect.height-this._totalHeight*this._showContent.scaleY),i>0&&(i=0),this._showContent.y=i)},s.updateMask=function(){this.viewRect.x=-this._showContent.x/this._showContent.scaleX,this.viewRect.y=-this._showContent.y/this._showContent.scaleY,this._showContent.mask=this.viewRect},s.validateAndTween=function(){var e=this,t=this._showContent.x,i=this._showContent.y;t<this.viewRect.width-this._totalWidth*this._showContent.scaleX&&(t=this.viewRect.width-this._totalWidth*this._showContent.scaleX),t>0&&(t=0),i<this.viewRect.height-this._totalHeight*this._showContent.scaleY&&(i=this.viewRect.height-this._totalHeight*this._showContent.scaleY),i>0&&(i=0),this._isTweening=!0,egret.Tween.get(this,{onChange:this.setPosition,onChangeObj:this}).to({slideXNoValidate:t,slideYNoValidate:i},300,egret.Ease.quadOut).call(function(){e._isTweening=!1},this)},s.slide=function(){if(!this._isTweening){var e=Math.max(Math.abs(this._rollSpeedX),Math.abs(this._rollSpeedY)),t=this._showContent.x+this._rollSpeedX*e/5,i=this._showContent.y+this._rollSpeedY*e/5,n=400+e/12;egret.Tween.get(this,{onChange:this.setPosition,onChangeObj:this}).to({slideX:t,slideY:i},n,egret.Ease.quadOut)}},s.onMove=function(){return Math.abs(this._lastPositionX-this.positionX)>10&&(this.dispatchMove(),Math.abs(this._lastPositionX-this.positionX)>50)?void this.dispatchUpdate():void(Math.abs(this._lastPositionY-this.positionY)>10&&(this.dispatchMove(),Math.abs(this._lastPositionY-this.positionY)>50&&this.dispatchUpdate()))},s.dispatchMove=function(){this.dispatchEvent(new egret.Event(t.EVENT_PROGRESS_MOVE))},s.dispatchUpdate=function(){this._lastPositionX=this.positionX,this._lastPositionY=this.positionY,this.dispatchEvent(new egret.Event(t.EVENT_PROGRESS_UPDATE))},i(s,"slideXNoValidate",function(){return this._showContent.x},function(e){this._showContent.x=e,this.setPosition("x")}),i(s,"slideYNoValidate",function(){return this._showContent.y},function(e){this._showContent.y=e,this.setPosition("y")}),i(s,"slideX",function(){return this._showContent.x},function(e){this._showContent.x=e,this.validate("x"),this.setPosition("x")}),i(s,"slideY",function(){return this._showContent.y},function(e){this._showContent.y=e,this.validate("y"),this.setPosition("y")}),i(s,"showContent",function(){return this._showContent}),s.setViewPosition=function(e,t){this._showContent.x=-e*this._showContent.scaleX,this._showContent.y=-t*this._showContent.scaleY,this.validate(),this.setPosition()},i(s,"scrollEnabled",void 0,function(e){this._scrollEnabled=e,egret.Tween.removeTweens(this),e&&this.validateAndTween()}),t.EVENT_PROGRESS_UPDATE="event_progress_update",t.EVENT_PROGRESS_MOVE="event_progress_move",t}(egret.DisplayObjectContainer);egret.registerClass(ScrollRectView,"ScrollRectView");var TabbarButton=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setBtnSkin=function(e,t){this.up.source=e,this.down.source=t},n.setLabelDisplay=function(e){"string"==typeof e?this.label.text=e:(this._labelDis=e,this.addChild(this._labelDis),this.label.visible=!1)},n.init=function(){this.up=new eui.Image,this.down=new eui.Image,this.down.visible=!1,this.addChild(this.up),this.addChild(this.down),this.label=new eui.Label,this.label.verticalCenter=0,this.label.horizontalCenter=0,this.label.size=26,this.label.bold=!0,this.label.fontFamily="黑体",this.label.textColor=16777215,this.label.fontFamily="SimHei",this.fill(this.up),this.fill(this.down),this.addChild(this.label)},n.fill=function(e){e.scale9Grid=new egret.Rectangle(23,24,60,26),e.top=0,e.bottom=0,e.left=0,e.right=0},n.active=function(){this.up.visible=!1,this.down.visible=!0,this.label.textColor=16773376},n.deactive=function(){this.up.visible=!0,this.down.visible=!1,this.label.textColor=16777215},n.setButtonWidth=function(e){this.width=e},t}(eui.Group);egret.registerClass(TabbarButton,"TabbarButton");var TabbarButtonData=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TabbarButtonData,"TabbarButtonData");var UnderLineLabel=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this._label=new egret.TextField,this._underLine=new egret.Shape,this.addChild(this._label),this.addChild(this._underLine)},i(s,"text",function(){return this._label.text},function(e){this._label.text=e,this.updateUnderLine()}),s.updateUnderLine=function(){var e=this;egret.callLater(function(){var t=e.getLabelBounds();e._underLine.graphics.clear(),e._underLine.graphics.lineStyle(2,e._label.textColor),e._underLine.graphics.moveTo(t.x,t.y+t.height),e._underLine.graphics.lineTo(t.x+t.width,t.y+t.height)},this)},s.getLabelBounds=function(){var e=new egret.Rectangle;return e.width=this._label.textWidth,e.height=this._label.textHeight,this._label.textAlign==egret.HorizontalAlign.LEFT?e.x=0:this._label.textAlign==egret.HorizontalAlign.CENTER?e.x=(this._label.width-this._label.textWidth)/2:this._label.textAlign==egret.HorizontalAlign.RIGHT&&(e.x=this._label.width-this._label.textWidth),this._label.verticalAlign==egret.VerticalAlign.TOP?e.y=0:this._label.verticalAlign==egret.VerticalAlign.MIDDLE?e.y=(this._label.height-this._label.textHeight)/2:this._label.verticalAlign==egret.VerticalAlign.BOTTOM&&(e.y=this._label.height-this._label.textHeight),e},i(s,"label",function(){return this._label}),t}(egret.DisplayObjectContainer);egret.registerClass(UnderLineLabel,"UnderLineLabel");var Dict=function(){function e(){return Object.create(null)}var t=(__define,e);t.prototype;return e}();egret.registerClass(Dict,"Dict");var SimpleLoading=function(){function e(){}var t=(__define,e),i=t.prototype;return e.i=function(){return this._instance||(this._instance=new e),this._instance},i.showLoading=function(){},i.hideLoading=function(){},i.setProgress=function(e){},e}();egret.registerClass(SimpleLoading,"SimpleLoading");var BaseModule=function(){function e(){}var t=(__define,e),i=t.prototype;return i.regMsgListener=function(e,t){Api.MessageCenter.regMsgListener(e,t,this)},i.sendMsg=function(e){Api.GameSocket.sendMsg(e)},e}();egret.registerClass(BaseModule,"BaseModule");var ModuleManager=function(){function e(){this._modules=Object.create(null)}var t=(__define,e),i=t.prototype;return i.regModule=function(e,t){return this._modules[e]?void console.error("duplicate module reg:"+e):void(this._modules[e]=new t)},i.getModule=function(e){return this._modules[e]?this._modules[e]:(console.error("cant find module:"+e),null)},e}();egret.registerClass(ModuleManager,"ModuleManager");var GlobalRes=function(){function e(){this._textBaseConfig={},this._textConfig={},this.setLanguage()}var t=(__define,e),i=t.prototype;return i.setLanguage=function(t){var i;if(i=t?t:egret.getOption("lang"),i==Lang.LANG_CN||i==Lang.LANG_EN||i==Lang.LANG_TW)e.Lang=i;else{var n=navigator.userAgent;-1!=n.indexOf("; "+Lang.LANG_EN)?e.Lang=Lang.LANG_EN:-1!=n.indexOf("; "+Lang.LANG_CN)?e.Lang=Lang.LANG_CN:-1!=n.indexOf("; "+Lang.LANG_TW)?e.Lang=Lang.LANG_TW:e.Lang=Lang.LANG_CN}},i.initTextBaseConfig=function(e){this._textBaseConfig=e},i.initTextConfig=function(e){this._textConfig=e},i.initGameConfig=function(e){this._config=e,this._config&&EventCenter.dispatchWith("config_complete")},i.getConfig=function(e){var t=e.split(".");return this.getConfigByParas(t[0],t[1],t[2])},i.getConfigByParas=function(e,t,i){return i?this._config[e][t][i]:t?this._config[e][t]:this._config[e]},i.getText=function(e){return this._textConfig[e]?this._textConfig[e]:this._textBaseConfig[e]?this._textBaseConfig[e]:(console.log("Global Text '"+e+"' not defined!"),"")},i.getNotice=function(e){var t="notice_"+e;return this._textConfig[t]?this._textConfig[t]:this._textBaseConfig[t]?this._textBaseConfig[t]:(console.log("Global Text '"+t+"' not defined!"),"")},e}();egret.registerClass(GlobalRes,"GlobalRes");var LayerType=function(){function e(){}var t=(__define,e);t.prototype;return e.ALERT="alert",e.GUIDE="guide",e.TIPS="tips",e.UI_TOP="ui_top",e.UI="ui",e.UI_BOTTOM="ui_bottom",e.GAME="game",e.BACKGROUND="background",e}();egret.registerClass(LayerType,"LayerType");var Layers=function(){function e(e){this.init(e)}var t=(__define,e),i=t.prototype;return i.init=function(e){this._layers||(this._layers={},this.addLayer(this._layers,LayerType.BACKGROUND,e),this.addLayer(this._layers,LayerType.GAME,e),this.addLayer(this._layers,LayerType.UI_BOTTOM,e),this.addLayer(this._layers,LayerType.UI,e),this.addLayer(this._layers,LayerType.UI_TOP,e),this.addLayer(this._layers,LayerType.TIPS,e),this.addLayer(this._layers,LayerType.GUIDE,e),this.addLayer(this._layers,LayerType.ALERT,e),this.resizeLayer())},i.addLayer=function(e,t,i){var n=new eui.Group;n.touchEnabled=!1,e[t]=n,i.addChild(n)},i.resizeLayer=function(){for(var e in this._layers)this._layers[e].width=Api.StageUtil.stageWidth,this._layers[e].height=Api.StageUtil.stageHeight},i.getLayer=function(e){return this._layers[e]},i.getLayers=function(){return this._layers},e}();egret.registerClass(Layers,"Layers");var StageUtil=function(){function e(e){this.init(e)}var t=(__define,e),i=t.prototype;return i.init=function(e){this.stage=e,this.stageHeight=e.stageHeight,this.stageWidth=e.stageWidth,this.stage.addEventListener(egret.Event.RESIZE,this.resizeStage,this)},i.resizeStage=function(){this.stageHeight=this.stage.stageHeight,this.stageWidth=this.stage.stageWidth,Api.Layers.resizeLayer()},e}();egret.registerClass(StageUtil,"StageUtil");var TimerManager=function(){function e(){this._handlers=new Dict,this._timeCall=new Dict,this._id=0,egret.startTick(this.onFrame,this),this._lastTimestamp=egret.getTimer(),this._serverTime=(new Date).getTime()}var t=(__define,e),i=t.prototype;return i.setServerTime=function(e){this._serverTime=1e3*e},i.getTime=function(){return parseInt(this._serverTime+"")},i.regTimeCall=function(e,t,i,n,s){var r,a=new Date(this._serverTime).getTime(),o=new Date;o.setHours(e),o.setMinutes(t),o.setSeconds(0),o.setMilliseconds(0);var h=o.getTime();if(a>h){var l=new Date;l.setHours(24),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),r=l.getTime()-a,r+=36e5*e+6e4*t}else r=h-a;var c=new TimerHandler;return c.callback=i,c.callObj=n,c.repeatCount=1,c.callPara=s,c.timeScale=r,this.addHandler(c)},i.regCountdown=function(e,t,i,n,s){var r=new TimerHandler;return r.callback=t,r.callObj=n,r.completeCallBack=i,r.repeatCount=e,r.timeScale=1e3,r.callPara=s,this.addHandler(r)},i.startTicker=function(e,t,i){var n=new TimerHandler;return n.callback=e,n.callObj=t,n.timeScale=0,n.callPara=i,this.addHandler(n)},i.setTimeout=function(e,t,i,n){var s=new TimerHandler;return s.callback=e,s.callObj=t,s.timeScale=i,s.repeatCount=1,s.callPara=n,this.addHandler(s)},i.setInterval=function(e,t,i,n){var s=new TimerHandler;return s.callback=e,s.callObj=t,s.timeScale=i,s.callPara=n,this.addHandler(s)},i.onFrame=function(e){var t=e-this._lastTimestamp;this._lastTimestamp=e,this._serverTime+=t;for(var i,n=Object.keys(this._handlers),s=n.length-1;s>=0;s--)i=this._handlers[n[s]],i&&(i.isPause||(i.timePast+=t),!i.isPause&&i.timePast>=i.timeScale&&(i.repeatCount>0&&i.repeatCount--,i.callback&&(i.callPara?i.callback.call(i.callObj,i.callPara):null!=i.repeatCount?i.callback.call(i.callObj,i.repeatCount):i.callback.call(i.callObj,t)),0==i.repeatCount&&(i.completeCallBack&&i.completeCallBack.call(i.callObj),delete this._handlers[n[s]]),i.timePast-=i.timeScale));return!0},i.pauseHandler=function(e,t){void 0===t&&(t=!0),this._handlers[e].isPause=t},i.remove=function(e){delete this._handlers[e]},i.addHandler=function(e){return this._handlers[++this._id]=e,this._id},e}();egret.registerClass(TimerManager,"TimerManager");var TimerHandler=function(){function e(){this.timePast=0}var t=(__define,e);t.prototype;return e}();egret.registerClass(TimerHandler,"TimerHandler");var Dialogue=function(){function e(){}var t=(__define,e),i=t.prototype;return i.regConfirm=function(e){this._confirm=e},i.regDialogue=function(e){this._dialogue=e},i.confirm=function(e,t){this._confirm.openView(arguments)},i.dialogue=function(e,t,i,n,s){this._dialogue.openView(arguments)},e}();egret.registerClass(Dialogue,"Dialogue");var TipsManager=function(){function e(){this._margin=5,this._maxTips=5,this._fadeTime=2e3,this._moveDis=150,this._tipsPool=[],this._currTips=[]}var t=(__define,e),i=t.prototype;return i.setItemType=function(e){this._itemType=e},i.setProp=function(e){e.margin&&(this._margin=e.margin),e.fadeTime&&(this._fadeTime=e.fadeTime),e.moveDis&&(this._moveDis=e.moveDis),e.maxTips&&(this._maxTips=e.maxTips)
},i.showTips=function(e){var t=this.getTips();if(t.onShow(e),t.x=(Api.StageUtil.stageWidth-t.width)/2,t.y=Api.StageUtil.stageHeight/2,this._currTips.length){var i=this._currTips[this._currTips.length-1];t.y=i.y+i.height+this._margin}this._currTips.length>this._maxTips&&this.recycleTip(this._currTips[0]),Api.Layers.getLayer(LayerType.TIPS).addChild(t),this._currTips.push(t),this.moveTips(t)},i.moveTips=function(e){var t=e.y-this._moveDis;egret.Tween.get(e).to({y:t},this._fadeTime).call(this.onMoveEnd,this,[e])},i.onMoveEnd=function(e){this.recycleTip(e)},i.showTipsByKey=function(e){this.showTips(Api.GlobalRes.getText(e))},i.getTips=function(){if(this._tipsPool.length)return this._tipsPool.pop();var e=new this._itemType;return e.touchEnabled=!1,e},i.recycleTip=function(e){this._currTips.shift(),egret.Tween.removeTweens(e),e.stage&&Api.Layers.getLayer(LayerType.TIPS).removeChild(e),this._tipsPool.push(e),e.onHide()},e}();egret.registerClass(TipsManager,"TipsManager");var URLLoaderPool=function(){function e(){this._loaderPool=[],this._loaderCallBack=new Dict}var t=(__define,e),i=t.prototype;return i.load=function(e,t,i,n,s){void 0===n&&(n=egret.URLRequestMethod.POST);var r=this.getNewLoader(),a=r._request;if(a.method=n,a.url=e,s){var o=new egret.URLVariables;o.variables=s}a.data=o,this._loaderCallBack[r.hashCode]={call:t,obj:i},r.load(a)},i.recycleLoader=function(e){this._loaderPool.push(e)},i.getNewLoader=function(){if(this._loaderPool.length)return this._loaderPool.shift();var e=new egret.URLLoader;this.initLoaderEvent(e);var t=new egret.URLRequest;return e._request=t,e},i.initLoaderEvent=function(e){e.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this)},i.onLoadComplete=function(e){var t=this._loaderCallBack[e.currentTarget.hashCode];t.call.call(t.obj,e.currentTarget.data),e.currentTarget._request.data=null,this.recycleLoader(e.currentTarget),delete this._loaderCallBack[e.currentTarget.hashCode]},i.onLoadError=function(e){Api.Log.error("urlloader ioerror :"+e.currentTarget._request.url),this.recycleLoader(e.currentTarget),e.currentTarget._request.data=null,delete this._loaderCallBack[e.currentTarget.hashCode]},e}();egret.registerClass(URLLoaderPool,"URLLoaderPool");var ArrayUtil=function(){function e(){}var t=(__define,e),i=t.prototype;return i.sortBy=function(e,t){e.sort(this.sortByKeyFun(t))},i.sortByKeyFun=function(e){return function(t,i){return t[e]>i[e]?-1:t[e]==i[e]?0:1}},i.getRandomArray=function(e){for(var t=[],i=0;e>i;i++)t.push(i);return t.sort(this.randomSort)},i.randomSort=function(e,t){return Math.random()>.5?-1:1},e}();egret.registerClass(ArrayUtil,"ArrayUtil");var DateUtil=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getFormatBySecond=function(e,t){void 0===t&&(t=1);var i="";switch(t){case 1:i=this.getFormatBySecond1(e);break;case 2:i=this.getFormatBySecond2(e);break;case 3:i=this.getFormatBySecond3(e);break;case 4:i=this.getFormatBySecond4(e);break;case 5:i=this.getFormatBySecond5(e);break;case 6:i=this.getFormatBySecond6(e)}return i},i.getFormatBySecond1=function(e){void 0===e&&(e=0);var t,i=Math.floor(e/3600);t=0==i?"00":10>i?"0"+i:""+i;var n,s,r=Math.floor((e-3600*i)/60),a=Math.floor((e-3600*i)%60);return n=0==r?"00":10>r?"0"+r:""+r,s=0==a?"00":10>a?"0"+a:""+a,t+":"+n+":"+s},i.getFormatBySecond6=function(e){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60);return t+Api.GlobalRes.getText("hour")+i+Api.GlobalRes.getText("minute")},i.getFormatBySecond3=function(e){void 0===e&&(e=0);var t,i,n=Math.floor(e/3600),s=Math.floor((e-3600*n)/60),r=Math.floor((e-3600*n)%60);return t=0==s?"00":10>s?"0"+s:""+s,i=0==r?"00":10>r?"0"+r:""+r,t+":"+i},i.getFormatBySecond2=function(e){var t=new Date(e),i=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),r=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return i+"-"+n+"-"+s+" "+r+":"+a+":"+o},i.getFormatBySecond4=function(e){var t=Math.floor(e/3600);return t>0?t>24?Math.floor(t/24)+"天前":t+"小时前":Math.floor(e/60)+"分钟前"},i.getFormatBySecond5=function(e){var t=86400,i=3600,n=60,s=Math.floor(e/t),r=Math.floor(e%t/i),a=Math.floor((e-r*i)/n),o=Math.floor((e-r*i)%n),h="",l="",c="",u="";return e>0?0==s?(h="",0==r?(l="",0==a?(c="",u=0==o?"":10>o?"0"+o+"秒":""+o+"秒"):(c=""+a+"分",u=0==o?"":10>o?"0"+o+"秒":""+o+"秒",c+u)):(l=r+"小时",0==a?(c="",u=0==o?"":10>o?"0"+o+"秒":""+o+"秒"):(c=10>a?"0"+a+"分":""+a+"分",l+c))):(h=s+"天",l=0==r?"":10>r?"0"+r+"小时":""+r+"小时",h+l):""},i.getTimeInfo=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e}();egret.registerClass(DateUtil,"DateUtil");var DelayOptManager=function(){function e(){this.TIME_THRESHOLD=3,this._delayOpts=[]}var t=(__define,e),i=t.prototype;return e.i=function(){return this._instance||(this._instance=new e),this._instance},i.addDelayOptFunction=function(e,t,i,n,s){this._delayOpts.push({fun:t,funPara:i,thisObj:e,callback:n,para:s}),egret.startTick(this.runCachedFun,this)},i.runCachedFun=function(e){this._delayOpts.length||egret.stopTick(this.runCachedFun,this);for(var t,i=egret.getTimer();this._delayOpts.length&&(t=this._delayOpts.shift(),void 0!=t.funPara?t.fun.call(t.thisObj,t.funPara):t.fun.call(t.thisObj),t.callback&&(void 0!=t.para?t.callback.call(t.thisObj,t.para):t.callback()),!(egret.getTimer()-i>this.TIME_THRESHOLD)););return!0},e}();egret.registerClass(DelayOptManager,"DelayOptManager");var LocationProperty=function(){function e(){}var t=(__define,e);t.prototype;return e.getPara=function(e,t){var i=t||location.href;if(-1!=i.indexOf("?")){var n="&"+i.split("?")[1],s=new RegExp("&"+e+"=.*?(?:&|$)"),r=s.exec(n);if(r){var a=r[0];return a.split("&")[1].split("=")[1]}}return null},e.setProperty=function(e,t,i){var n=i||location.href,s="&"+n.split("?")[1];if(-1==n.indexOf("?"))return n+="?"+e+"="+t;var s=n.split("?")[1];if(""==s)return n+=e+"="+t;var r=new RegExp("(?:^|&)"+e+"=.*?(?:&|$)"),a=r.exec(s);if(a&&""!=a[0]){var o=a[0],h=new RegExp("=.*$"),l=o.replace(h,"="+t);return n.replace(o,l)}return n+="&"+e+"="+t},e.hasProperty=function(e,t){var i="&"+t.split("?")[1];return-1!=i.indexOf("&"+e+"=")},e}();egret.registerClass(LocationProperty,"LocationProperty");var Log=function(){function e(){this._logLevel=LogLevel.ERROR,"1"==egret.getOption("debug")&&(this._logLevel=LogLevel.DEBUG)}var t=(__define,e),i=t.prototype;return i.setLevel=function(e){this._logLevel=e},i.debug=function(e){this._logLevel<=LogLevel.DEBUG&&(e instanceof Object&&(e=JSON.stringify(e)),console.debug("["+Api.DateUtil.getTimeInfo()+"]"+e))},i.info=function(e){this._logLevel<=LogLevel.INFO&&(e instanceof Object&&(e=JSON.stringify(e)),console.log("["+Api.DateUtil.getTimeInfo()+"]"+e))},i.warn=function(e){this._logLevel<=LogLevel.WARN&&(e instanceof Object&&(e=JSON.stringify(e)),console.warn("["+Api.DateUtil.getTimeInfo()+"]"+e))},i.error=function(e){this._logLevel<=LogLevel.ERROR&&(e instanceof Object&&(e=JSON.stringify(e)),console.error("["+Api.DateUtil.getTimeInfo()+"]"+e))},i.fatal=function(e){this._logLevel<=LogLevel.FATAL&&(e instanceof Object&&(e=JSON.stringify(e)),console.error("["+Api.DateUtil.getTimeInfo()+"]"+e))},e}();egret.registerClass(Log,"Log");var LogLevel;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.FATAL=4]="FATAL"}(LogLevel||(LogLevel={}));var MathUtils=function(){function e(){this.PI=3.14}var t=(__define,e),i=t.prototype;return i.angleToArc=function(e){return e/180*this.PI},i.distance=function(e,t,i,n){var s=Math.pow(i-e,2)+Math.pow(n-t,2);return Math.sqrt(s)},i.pointDistance=function(e,t){return this.distance(e.x,e.y,t.x,t.y)},i.getArc=function(e,t,i,n){return Math.atan2(n-t,i-e)},i.getAngle=function(e,t,i,n){return Math.atan2(n-t,i-e)/this.PI*180},e}();egret.registerClass(MathUtils,"MathUtils");var NumberFormat=function(){function e(){}var t=(__define,e),i=t.prototype;return i.formatNumber=function(e){return this.formatString(e+"")},i.formatString=function(e){var t=e.length;if(5>t)return e;var i,n=Math.floor((t-1)/3);1==n?i="K":2==n?i="M":3==n&&(i="B");for(var s="",r=0,a=t-1;a>=0;a--)r++,s=e.charAt(a)+s,r%3==0&&0!=a&&(s="."+s);return s=s.slice(0,4),"."==s.charAt(3)&&(s=s.slice(0,3)),s+i},i.formatString2=function(e){var t=e.length;if(8>t)return e;var i,n=Math.floor((t-1)/3);1==n?i="K":2==n?i="M":3==n&&(i="B");for(var s="",r=0,a=t-1;a>=0;a--)r++,s=e.charAt(a)+s,r%3==0&&0!=a&&(s="."+s);return s=s.slice(0,6),"."==s.charAt(5)&&(s=s.slice(0,5)),s+i},e}();egret.registerClass(NumberFormat,"NumberFormat");var ResourceUtil=function(){function e(){this._groupIndex=0,this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}var t=(__define,e),i=t.prototype;return i.addConfig=function(e,t){this._configs.push([e,t])},i.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},i.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},i.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},i.loadGroup=function(e,t,i,n){this._groups[e]=[t,i,n],RES.loadGroup(e)},i.loadGroups=function(e,t,i,n,s){RES.createGroup(e,t,!0),this.loadGroup(e,i,n,s)},i.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var i="pilferer_"+e;t||(t=[e]),RES.createGroup(i,t,!0),RES.loadGroup(i,-1)},i.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][0],n=this._groups[t][2];null!=i&&i.call(n),this._groups[t]=null,delete this._groups[t]}},i.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][1],n=this._groups[t][2];null!=i&&i.call(n,e.itemsLoaded,e.itemsTotal)}},i.onResourceLoadError=function(e){Api.Log.error(e.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(e)},i.loadResource=function(e,t,i,n){void 0===e&&(e=[]),void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null);var s="loadGroup"+this._groupIndex++;RES.createGroup(s,e,!0),this._groups[s]=[t,i,n];try{RES.loadGroup(s)}catch(r){console.log("group empty::"+JSON.stringify(e))}},i.loadPicAsyn=function(e,t,i,n){RES.getResByUrl(e,function(e){t.texture=e,i&&(t.width=i,t.height=n)},this)},e}();egret.registerClass(ResourceUtil,"ResourceUtil");var TextFlowMaker=function(){function e(){}var t=(__define,e),i=t.prototype;return i.makeTextFlow=function(e){var t=[];if(!e||""==e)return[];var i;for(e=e.replace(/\\\{/g,"|Saco|"),e=e.replace(/\\\}/g,"|Sacoz|"),e=e.replace(/\\\,/g,"|Saco1|"),e=e.replace(/\\\:/g,"|Saco2|");e.length;)if(i=e.indexOf("{"),i>0)t.push(this.getTextFlowElement(e.slice(0,e.indexOf("{")))),e=e.slice(e.indexOf("{"));else{if(0!=i){t.push(this.getTextFlowElement(e));break}t.push(this.getTextFlowElement(e.slice(i,e.indexOf("}")+1))),e=e.slice(e.indexOf("}")+1)}return t},i.getTextFlowElement=function(e){var t=new TextFlowElement;if("{"==e.charAt(0)){e=e.replace(/ *, */g,'","'),e=e.replace(/ *: */g,'":"'),e=e.replace(/\{/g,'{"'),e=e.replace(/}/g,'"}');var i=JSON.parse(e);t.text=this.resumeText(i.t),t.style=new TextFlowElementStyle,t.style.textColor=i.c,t.style.size=i.s,t.style.underline=i.u,t.style.italic=i.i,t.style.bold=i.b,t.style.stroke=i.st,t.style.strokeColor=i.sc,t.style.fontFamily=i.f,t.style.target=i.ta,i.h&&(t.style.href=i.h),i.e&&(t.style.href="event:"+i.e)}else t.text=this.resumeText(e);return t},i.resumeText=function(e){return e=e.replace(/\|Saco\|/g,"{"),e=e.replace(/\|Sacoz\|/g,"}"),e=e.replace(/\|Saco1\|/g,","),e=e.replace(/\|Saco2\|/g,":")},e}();egret.registerClass(TextFlowMaker,"TextFlowMaker");var TextFlowElement=function(){function e(e){this.text=e}var t=(__define,e);t.prototype;return e}();egret.registerClass(TextFlowElement,"TextFlowElement",["egret.ITextElement"]);var TextFlowElementStyle=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(TextFlowElementStyle,"TextFlowElementStyle",["egret.ITextStyle"]);var ViewManager=function(){function e(){this._views=Object.create(null)}var t=(__define,e),i=t.prototype;return i.initMask=function(){this.backBlack=new eui.Rect(Api.StageUtil.stageWidth,Api.StageUtil.stageHeight,0),this.backBlack.alpha=.6,this.backBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},i.regView=function(e,t,i){this._views[e]=new t,this._views[e].viewID=e,this._views[e].viewParent=Api.Layers.getLayer(i)},i.openView=function(e,t){if(void 0===t&&(t=null),this._views[e]){var i=this._views[e];i.openView(t)}},i.openViewAndClose=function(e,t,i){if(this._views[e]){var n=this._views[e];n.closeHookView=t,n.openView(i)}},i.getView=function(e){return this._views[e]},i.closeView=function(e){this._views[e]&&this._views[e].close()},i.closeViewsByLayer=function(e){for(var t=Api.Layers.getLayer(e);t.numChildren>0;){var i=t.getChildAt(0);i.close()}},i.close=function(e){e.close()},i.closeAll=function(e){var t=Api.Layers.getLayers();for(var i in t)for(var n=t[i].numChildren-1;n>=0;){var s=t[i].getChildAt(n);n--,s!=e&&(s instanceof BaseView?s.close():s.parent.removeChild(s))}},e}();egret.registerClass(ViewManager,"ViewManager");var GameControl=function(){function e(){}var t=(__define,e);t.prototype;return e}();egret.registerClass(GameControl,"GameControl");var GameData=function(){function e(){}var t=(__define,e);t.prototype;return e.config=[{drag_img:"image_06_png",accept_img:"3_png",text:"mother"},{drag_img:"image_12_png",accept_img:"2_png",text:"father"},{drag_img:"image_14_png",accept_img:"1_png",text:"brother"},{drag_img:"image_16_png",accept_img:"4_png",text:"sister"},{drag_img:"image_22_png",accept_img:"6_png",text:"grandmother"},{drag_img:"image_24_png",accept_img:"5_png",text:"grandfather"}],e.score=0,e}();egret.registerClass(GameData,"GameData");var GameDragAcceptItem=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(e){this.proto=GameData.config[e],this.img.source=this.proto.accept_img,this.txtName.text=""},n.childrenCreated=function(){e.prototype.childrenCreated.call(this),Api.DragManager.regAcceptDrag(this)},n.onDragIn=function(e){""==this.txtName.text&&(this.txtName.text=e.proto.text,e.visible=!1,this.check()?this.playWinSound():this.playFalseSound())},n.playWinSound=function(){var e=["verygood","excellent","goodjob","welldone"],t=Math.floor(4*Math.random());RES.getRes(e[t]+"_mp3").play(0,1),Api.ViewManager.getView(2).onWin()},n.playFalseSound=function(){RES.getRes("oops_mp3").play(0,1)},n.check=function(){return this.txtName.text==this.proto.text?!0:(this.txtName.textColor=16711680,!1)},n.reset=function(){this.txtName.text="",this.txtName.textColor=3355443},t}(eui.Component);egret.registerClass(GameDragAcceptItem,"GameDragAcceptItem",["DragAccept"]);var GameDragItem=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(e){this.proto=GameData.config[e],this.img.source=this.proto.drag_img},n.childrenCreated=function(){e.prototype.childrenCreated.call(this),Api.DragManager.regDragItem(this)},n.onDragBegin=function(e){this.dispatchEventWith(t.DRAG_BEGIN)},n.onDragEnd=function(e){this.dispatchEventWith(t.DRAG_END)},n.onDragMove=function(e){},n.reset=function(){this.visible=!0},t.DRAG_BEGIN="drag_begin",t.DRAG_END="drag_end",t.DRAG_MOVE="drag_move",t}(eui.Component);egret.registerClass(GameDragItem,"GameDragItem",["DragItem"]);var GameView=function(e){function t(){e.call(this),this.skinName=new GameSkin}__extends(t,e);var i=(__define,t),n=i.prototype;return n.initView=function(){var t=this;e.prototype.initView.call(this),this.btn.source="submit_png",this.forEachDragItem(function(e,t){e.init(t)}),this.forEachDragAccept(function(e,t){e.init(t)}),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){"check_png"==t.btn.source?(t.check(),Api.ViewManager.openView(4,GameData.score),t.btn.source="submit_png"):Api.ViewManager.openView(3,GameData.score)},this)},n.check=function(){GameData.score=0,this.forEachDragAccept(function(e){e.check()&&(GameData.score+=1)}),this.tf_total.text=GameData.score.toString()},n.reset=function(){GameData.score=0,this.tf_total.text="0",this.btn.source="check_png",this.forEachDragItem(function(e){e.reset()}),this.forEachDragAccept(function(e){e.reset()})},n.forEachDragItem=function(e){this.forEachItem("drag",e)},n.forEachDragAccept=function(e){this.forEachItem("drag_ac",e)},n.forEachItem=function(e,t){for(var i=0;6>i;i++)t(this[e+"_"+i],i)},n.onWin=function(){Api.ViewManager.openView(4,"+1"),GameData.score++,this.tf_total.text=GameData.score+""},t}(BaseView);egret.registerClass(GameView,"GameView");